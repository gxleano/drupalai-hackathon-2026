uuid: c7e64e1d-3baf-45d0-9394-0aeac613b99a
langcode: en
status: true
dependencies: {  }
id: content_validation
label: 'Content Validation'
description: 'This workflow will validate the content based on EU guidelines returning the average of quality and suggesting changes if need it.'
nodes:
  -
    id: echack_flowdrop_node_session_content_context.1
    type: universalNode
    position:
      x: 1480
      'y': 500
    data:
      label: 'Content Context'
      config:
        is_default_revision: true
        nodeType: square
        instanceTitle: ''
        instanceDescription: ''
      metadata:
        id: echack_flowdrop_node_session_content_context
        name: 'Content Context'
        type: default
        supportedTypes:
          - default
          - simple
          - square
        description: 'Load a Drupal node as context for the workflow. Supports specific revision loading.'
        category: data
        icon: 'mdi:page-layout-body'
        color: '#f97316'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'echack_flowdrop_node_session:entity_context'
        inputs:
          -
            id: entity_type
            name: 'Entity Type'
            type: input
            dataType: string
            required: false
            description: 'The entity type to load (e.g., node, taxonomy_term, user)'
            defaultValue: node
          -
            id: entity_id
            name: 'Entity ID'
            type: input
            dataType: string
            required: false
            description: 'The ID of the entity to load'
            defaultValue: ''
          -
            id: bundle
            name: Bundle
            type: input
            dataType: string
            required: false
            description: 'The entity bundle/content type (optional, used for validation)'
            defaultValue: ''
          -
            id: revision_id
            name: 'Revision ID'
            type: input
            dataType: string
            required: false
            description: 'Optional revision ID to load a specific version of the entity. If empty, loads the current/default revision.'
            defaultValue: ''
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: entity
            name: Entity
            type: output
            dataType: json
            required: false
            description: 'Full serialized entity data including fields'
          -
            id: entity_type
            name: entity_type
            type: output
            dataType: string
            required: false
            description: 'The entity type ID'
          -
            id: entity_id
            name: entity_id
            type: output
            dataType: string
            required: false
            description: 'The entity ID'
          -
            id: bundle
            name: bundle
            type: output
            dataType: string
            required: false
            description: 'The entity bundle/content type'
          -
            id: revision_id
            name: revision_id
            type: output
            dataType: string
            required: false
            description: 'The revision ID (if a specific revision was loaded)'
          -
            id: is_default_revision
            name: is_default_revision
            type: output
            dataType: boolean
            required: false
            description: 'Whether this is the default/current revision'
          -
            id: loaded_from
            name: loaded_from
            type: output
            dataType: string
            required: false
            description: "How the entity was loaded: 'session_context' (pre-injected) or 'parameters' (loaded on demand)"
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          is_default_revision: true
          type: default
        configSchema:
          type: object
          properties:
            is_default_revision:
              type: boolean
              title: 'Is Default Revision'
              description: 'Whether the loaded entity is the default revision (injected via session context)'
              default: true
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
                - square
              default: default
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: echack_flowdrop_node_session_content_context.1
      extensions:
        ui:
          hideUnconnectedHandles: true
    deletable: true
    measured:
      width: 80
      height: 80
    selected: false
    dragging: false
  -
    id: prompt_template.2
    type: universalNode
    position:
      x: 1770
      'y': 500
    data:
      label: 'Prompt Template'
      config:
        template: |-
          Please review and validate the following article:

          **Title:** {{ title }}

          **Full Article Content:**
          {% if body %}
          {{ body[0].value|raw }}
          {% else %}
          [No body content available]
          {% endif %}

          **Meta Description:**
          {% if field_meta_tags %}
          {{ field_meta_tags }}
          {% else %}
          [No meta tags configured]
          {% endif %}

          **Article Metadata:**
          - Entity Type: {{ entity_type }}
          - Bundle: {{ bundle }}
          - Status: {{ status ? 'Published' : 'Unpublished' }}
          - Language: {{ langcode }}
          - Author ID: {{ uid }}
          - Created: {{ created|date('Y-m-d H:i:s') }}
          - Last Modified: {{ changed|date('Y-m-d H:i:s') }}

          Please evaluate all 10 guidelines using the actual article content above.
        nodeType: simple
        instanceTitle: ''
        instanceDescription: ''
      metadata:
        id: prompt_template
        name: 'Prompt Template'
        type: simple
        supportedTypes:
          - default
          - simple
        description: 'Create prompts using templates with variable substitution'
        category: prompts
        icon: 'mdi:code-block-braces'
        color: '#f59e0b'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:prompt_template'
        inputs:
          -
            id: variables
            name: Variables
            type: input
            dataType: json
            required: false
            description: 'Default variables for the template'
            defaultValue: {  }
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: prompt
            name: prompt
            type: output
            dataType: string
            required: false
            description: 'The generated prompt'
          -
            id: template
            name: template
            type: output
            dataType: string
            required: false
            description: 'The original template'
          -
            id: variables
            name: variables
            type: output
            dataType: json
            required: false
            description: 'The variables used'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          template: ''
          type: simple
        configSchema:
          type: object
          properties:
            template:
              type: string
              title: Template
              description: 'The prompt template with variables in {{variable}} format'
              default: ''
              format: template
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
              default: simple
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: prompt_template.2
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 288
      height: 103
    selected: false
    dragging: false
  -
    id: flowdrop_ai_provider_chat_model.1
    type: universalNode
    position:
      x: 2250
      'y': 390
    data:
      label: 'Chat Model (Drupal AI)'
      config:
        model: mistral-medium-latest
        temperature: 0.3
        maxTokens: 2000
        systemPrompt: |
          You are an expert content quality validator specializing in European Commission content standards.

          Your task is to evaluate articles using these 10 guidelines inspired by European Commission content standards:

          1. **Accuracy & Evidence**: Are all claims factual, verifiable, and supported by reliable sources (e.g. EU institutions, official statistics, peer-reviewed research)?
          2. **Clarity & Plain Language**: Is the writing clear, accessible, and free of unnecessary jargon?
          3. **Neutrality & Objectivity**: Is the tone balanced, non-promotional, and free from opinion or bias?
          4. **Source Transparency**: Are data, quotes, and references properly attributed to credible sources?
          5. **Legal & Policy Consistency**: Are references to EU law, policies, and institutions accurate and up to date?
          6. **Audience Relevance**: Does the article clearly match its intended audience and purpose?
          7. **Structure & Coherence**: Is the article logically organized with good flow and clear sections?
          8. **Completeness & Context**: Does it provide enough background and depth to understand the topic?
          9. **Inclusivity & Language Ethics**: Does it use inclusive, non-discriminatory, and gender-neutral language?
          10. **Practical Value**: Does it help readers understand real-world implications or next steps?

          **For each guideline:**
          • Score from 1 (poor) to 5 (excellent)
          • Briefly explain your rating
          • Suggest concrete improvements

          **Then provide:**
          • An overall quality score (1–100)
          • A short summary of strengths
          • A prioritized list of fixes

          **Always output in this exact markdown format:**

          ## Content Validation Report: [Article Title]

          | Guideline | Score | Rating & Suggestions |
          |-----------|-------|---------------------|
          | **1. Accuracy & Evidence** | [1-5]/5 | [Brief explanation + concrete improvement suggestion] |
          | **2. Clarity & Plain Language** | [1-5]/5 | [Brief explanation + concrete improvement suggestion] |
          | **3. Neutrality & Objectivity** | [1-5]/5 | [Brief explanation + concrete improvement suggestion] |
          | **4. Source Transparency** | [1-5]/5 | [Brief explanation + concrete improvement suggestion] |
          | **5. Legal & Policy Consistency** | [1-5]/5 | [Brief explanation + concrete improvement suggestion] |
          | **6. Audience Relevance** | [1-5]/5 | [Brief explanation + concrete improvement suggestion] |
          | **7. Structure & Coherence** | [1-5]/5 | [Brief explanation + concrete improvement suggestion] |
          | **8. Completeness & Context** | [1-5]/5 | [Brief explanation + concrete improvement suggestion] |
          | **9. Inclusivity & Language Ethics** | [1-5]/5 | [Brief explanation + concrete improvement suggestion] |
          | **10. Practical Value** | [1-5]/5 | [Brief explanation + concrete improvement suggestion] |

          ---

          ### Overall Quality Score: [X]/100

          ### Strengths:
          [2-3 bullet points highlighting what the article does well]

          ### Priority Fixes:
          1. [Most critical issue to address]
          2. [Second most important fix]
          3. [Third most important fix]
        nodeType: default
        instanceTitle: 'Content Validator AI'
        instanceDescription: ''
      metadata:
        id: flowdrop_ai_provider_chat_model
        name: 'Chat Model (Drupal AI)'
        type: default
        supportedTypes:
          - default
        description: 'AI chat model for conversation and text generation'
        category: ai
        icon: 'mdi:robot'
        color: '#8b5cf6'
        plugin_version: 1.0.0
        enabled: true
        tags:
          - model
          - ai
        executor_plugin: 'flowdrop_ai_provider:chat_model'
        inputs:
          -
            id: message
            name: message
            type: input
            dataType: string
            required: false
            description: 'The message to send to the AI'
            defaultValue: ''
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: response
            name: response
            type: output
            dataType: string
            required: false
            description: 'The AI generated response'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          model: mistral-large-latest
          temperature: 0.7
          maxTokens: 1000
          systemPrompt: ''
          type: default
        configSchema:
          type: object
          properties:
            model:
              type: string
              title: Model
              description: 'The AI model to use'
              default: mistral-large-latest
            temperature:
              type: number
              title: Temperature
              description: 'Controls randomness (0-2)'
              default: 0.7
              minimum: 0
              maximum: 2
            maxTokens:
              type: integer
              title: 'Max Tokens'
              description: 'Maximum tokens in response'
              default: 1000
            systemPrompt:
              type: string
              title: 'System Prompt'
              description: 'System prompt to set AI behavior'
              default: ''
              format: textarea
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
              default: default
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: flowdrop_ai_provider_chat_model.1
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 288
      height: 440
    selected: true
    dragging: false
  -
    id: chat_output.1
    type: universalNode
    position:
      x: 2730
      'y': 560
    data:
      label: 'Chat Output'
      config:
        format: markdown
        showTimestamp: false
        nodeType: simple
        instanceTitle: 'Validation Report'
        instanceDescription: ''
      metadata:
        id: chat_output
        name: 'Chat Output'
        type: simple
        supportedTypes:
          - default
          - simple
          - square
        description: 'Output chat messages in various formats'
        category: processing
        icon: 'mdi:chat-alert-outline'
        color: '#14b8a6'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:chat_output'
        inputs:
          -
            id: message
            name: Message
            type: input
            dataType: string
            required: false
            description: 'Default chat message'
            defaultValue: ''
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: message
            name: message
            type: output
            dataType: string
            required: false
            description: 'The chat message content'
          -
            id: format
            name: format
            type: output
            dataType: string
            required: false
            description: 'The message format (text, markdown, html)'
          -
            id: timestamp
            name: timestamp
            type: output
            dataType: number
            required: false
            description: 'The message timestamp (if showTimestamp is enabled)'
          -
            id: metadata
            name: metadata
            type: output
            dataType: json
            required: false
            description: 'Additional metadata for message linking'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          format: markdown
          showTimestamp: false
          type: simple
        configSchema:
          type: object
          properties:
            format:
              type: string
              title: Format
              description: 'Message format (text, markdown, html)'
              default: markdown
            showTimestamp:
              type: boolean
              title: 'Show Timestamp'
              description: 'Whether to include timestamp'
              default: false
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
                - square
              default: simple
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: chat_output.1
      extensions:
        ui:
          hideUnconnectedHandles: true
    deletable: true
    measured:
      width: 288
      height: 88
    selected: false
    dragging: false
edges:
  -
    id: xy-edge__prompt_template.2prompt_template.2-output-prompt-flowdrop_ai_provider_chat_model.1flowdrop_ai_provider_chat_model.1-input-message
    source: prompt_template.2
    target: flowdrop_ai_provider_chat_model.1
    data:
      targetNodeType: universalNode
      targetCategory: ai
      metadata:
        edgeType: data
        sourcePortDataType: string
    sourceHandle: prompt_template.2-output-prompt
    targetHandle: flowdrop_ai_provider_chat_model.1-input-message
    style: 'stroke: var(--flowdrop-edge-data-color);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#9ca3af'
    class: flowdrop--edge--data
  -
    id: xy-edge__flowdrop_ai_provider_chat_model.1flowdrop_ai_provider_chat_model.1-output-response-chat_output.1chat_output.1-input-message
    source: flowdrop_ai_provider_chat_model.1
    target: chat_output.1
    data:
      targetNodeType: universalNode
      targetCategory: processing
      metadata:
        edgeType: data
        sourcePortDataType: string
    sourceHandle: flowdrop_ai_provider_chat_model.1-output-response
    targetHandle: chat_output.1-input-message
    style: 'stroke: var(--flowdrop-edge-data-color);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#9ca3af'
    class: flowdrop--edge--data
  -
    id: xy-edge__echack_flowdrop_node_session_content_context.1echack_flowdrop_node_session_content_context.1-output-entity-prompt_template.2prompt_template.2-input-variables
    source: echack_flowdrop_node_session_content_context.1
    target: prompt_template.2
    data:
      targetNodeType: universalNode
      targetCategory: prompts
      metadata:
        edgeType: data
        sourcePortDataType: json
    sourceHandle: echack_flowdrop_node_session_content_context.1-output-entity
    targetHandle: prompt_template.2-input-variables
    style: 'stroke: var(--flowdrop-edge-data-color);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#9ca3af'
    class: flowdrop--edge--data
metadata:
  version: 1.0.0
  createdAt: '2026-01-28T09:01:32.652Z'
  updatedAt: '2026-01-28T10:40:16.868Z'
created: 1769590598
changed: 1769597750
uid: 0
