uuid: 9cad53d5-79cc-41b4-9ecf-3996c8aa8eef
langcode: en
status: true
dependencies: {  }
id: content_validation_fixer
label: 'Content Validation Fixer'
description: 'This workflow will fix the content based on demand validation.'
nodes:
  -
    id: echack_flowdrop_node_session_content_context.1
    type: universalNode
    position:
      x: 0
      'y': -120
    data:
      label: 'Content Context'
      config:
        is_default_revision: true
        nodeType: default
        instanceTitle: ''
        instanceDescription: ''
      metadata:
        id: echack_flowdrop_node_session_content_context
        name: 'Content Context'
        type: default
        supportedTypes:
          - default
          - simple
          - square
        description: 'Load a Drupal node as context for the workflow. Supports specific revision loading.'
        category: data
        icon: 'mdi:page-layout-body'
        color: '#f97316'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:entity_context'
        inputs:
          -
            id: entity_type
            name: 'Entity Type'
            type: input
            dataType: string
            required: false
            description: 'The entity type to load (e.g., node, taxonomy_term, user)'
            defaultValue: node
          -
            id: entity_id
            name: 'Entity ID'
            type: input
            dataType: string
            required: false
            description: 'The ID of the entity to load'
            defaultValue: ''
          -
            id: bundle
            name: Bundle
            type: input
            dataType: string
            required: false
            description: 'The entity bundle/content type (optional, used for validation)'
            defaultValue: ''
          -
            id: revision_id
            name: 'Revision ID'
            type: input
            dataType: string
            required: false
            description: 'Optional revision ID to load a specific version of the entity. If empty, loads the current/default revision.'
            defaultValue: ''
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: entity
            name: Entity
            type: output
            dataType: json
            required: false
            description: 'Full serialized entity data including fields'
          -
            id: entity_type
            name: entity_type
            type: output
            dataType: string
            required: false
            description: 'The entity type ID'
          -
            id: entity_id
            name: entity_id
            type: output
            dataType: string
            required: false
            description: 'The entity ID'
          -
            id: bundle
            name: bundle
            type: output
            dataType: string
            required: false
            description: 'The entity bundle/content type'
          -
            id: revision_id
            name: revision_id
            type: output
            dataType: string
            required: false
            description: 'The revision ID (if a specific revision was loaded)'
          -
            id: is_default_revision
            name: is_default_revision
            type: output
            dataType: boolean
            required: false
            description: 'Whether this is the default/current revision'
          -
            id: loaded_from
            name: loaded_from
            type: output
            dataType: string
            required: false
            description: "How the entity was loaded: 'session_context' (pre-injected) or 'parameters' (loaded on demand)"
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          is_default_revision: true
          type: default
        configSchema:
          type: object
          properties:
            is_default_revision:
              type: boolean
              title: 'Is Default Revision'
              description: 'Whether the loaded entity is the default revision (injected via session context)'
              default: true
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
                - square
              default: default
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: echack_flowdrop_node_session_content_context.1
      extensions:
        ui:
          hideUnconnectedHandles: true
    deletable: true
    measured:
      width: 290
      height: 203
    selected: false
    dragging: false
  -
    id: flowdrop_ai_provider_chat_model.2
    type: universalNode
    position:
      x: 2660
      'y': -340
    data:
      label: 'Chat Model (Drupal AI)'
      config:
        model: mistral-large-latest
        temperature: 0.7
        maxTokens: 1000
        systemPrompt: |
          CRITICAL INSTRUCTIONS - READ CAREFULLY:

          1. You MUST output ONLY pure JSON - NO markdown, NO code fences, NO backticks, NO explanations
          2. Start your response with { and end with }
          3. Do NOT wrap your response in ```json or ```
          4. Output the JSON directly as plain text


          TASK:
          You are an expert content editor specializing in European Commission content standards. Improve the provided article to meet all 10 EU Commission content standards. If they content looks professional, then no need to reword it as it could be coming from a professional editor.

          REQUIRED JSON STRUCTURE (use actual content, not placeholders):
          {"title":"Improved title","field_body":[{"value":"<p>Complete improved HTML content</p>","summary":"Brief summary","format":"content_format"}],"field_metatags":[{"value":"{\"title\":\"SEO title 50-60 chars\",\"description\":\"SEO description 150-160 chars\"}"}],"meta_title":"SEO title 50-60 chars","meta_description":"SEO description 150-160 chars","explanation":"Summary of changes"}

          CRITICAL FIELD REQUIREMENTS:
          - title: Clear, neutral, SEO-friendly title (50-60 characters)
          - field_body: ARRAY with one object containing:
            * value: Full HTML content with proper structure, sources, citations
            * summary: One sentence summary
            * format: MUST be "content_format" (exactly this string)
          - field_metatags: REQUIRED array for Drupal (with nested JSON string)
          - field_metatags[0].value: JSON string with title and description (use \" for inner quotes)
          - meta_title: REQUIRED string (same as field_metatags title), 50-60 characters, SEO-focused
          - meta_description: REQUIRED string (same as field_metatags description), 150-160 characters with keywords
          - Note: meta_title and meta_description are duplicates for easy preview display
          - explanation: Brief summary of key improvements made
          - Use double quotes, escape inner quotes with \"
          - Compact format (no line breaks in JSON)

          CONTENT IMPROVEMENTS TO MAKE:
          1. Add proper citations and sources (official EU sources)
          2. Simplify language and remove jargon
          3. Remove promotional or biased language
          4. Add proper source attributions
          5. Verify legal/policy consistency with EU treaties
          6. Improve structure and coherence
          7. Add context and completeness
          8. Use inclusive, gender-neutral language
          9. Add practical value and next steps for readers
          10. Optimize for SEO

          EXAMPLE OUTPUT (copy this EXACT structure):
          {"title":"European Commission: Role, Powers & EU Policy Impact","field_body":[{"value":"<p>The European Commission serves as the executive branch of the European Union, responsible for proposing legislation and managing operations.</p><p>With proper citations and sources added throughout.</p>","summary":"Learn about the European Commission's role in EU governance.","format":"content_format"}],"field_metatags":[{"value":"{\"title\":\"European Commission: Role, Powers & EU Policy Impact\",\"description\":\"Discover how the European Commission shapes EU policy and legislation. Learn about its structure, powers, and impact on member states.\"}"}],"meta_title":"European Commission: Role, Powers & EU Policy Impact","meta_description":"Discover how the European Commission shapes EU policy and legislation. Learn about its structure, powers, and impact on member states."}
        instanceTitle: 'Content Fixer AI'
        instanceDescription: ''
      metadata:
        id: flowdrop_ai_provider_chat_model
        name: 'Chat Model (Drupal AI)'
        type: default
        supportedTypes:
          - default
        description: 'AI chat model for conversation and text generation'
        category: ai
        icon: 'mdi:robot'
        color: '#a855f7'
        plugin_version: 1.0.0
        enabled: true
        tags:
          - model
          - ai
        executor_plugin: 'flowdrop_ai_provider:chat_model'
        inputs:
          -
            id: message
            name: Message
            type: input
            dataType: string
            required: false
            description: 'Message to send to AI model'
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: response
            name: response
            type: output
            dataType: string
            required: false
            description: 'The AI model response'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          model: mistral-large-latest
          temperature: 0.7
          maxTokens: 1000
          systemPrompt: ''
        configSchema:
          type: object
          properties:
            model:
              type: string
              title: Model
              description: 'AI model to use for chat'
              default: mistral-large-latest
              enum:
                - chat
                - claude-4-5-sonnet
                - claude-4-5-opus
                - mistral-large-latest
                - mistral-medium-latest
              options:
                -
                  value: chat
                  label: 'chat (amazeeio)'
                -
                  value: claude-4-5-sonnet
                  label: 'claude-4-5-sonnet (amazeeio)'
                -
                  value: claude-4-5-opus
                  label: 'claude-4-5-opus (amazeeio)'
                -
                  value: mistral-large-latest
                  label: 'mistral-large-latest (amazeeio)'
                -
                  value: mistral-medium-latest
                  label: 'mistral-medium-latest (amazeeio)'
            temperature:
              type: number
              title: Temperature
              description: 'Model temperature (0.0 to 2.0)'
              default: 0.7
              minimum: 0
              maximum: 2
              step: '0.01'
              format: range
            maxTokens:
              type: integer
              title: 'Max Tokens'
              description: 'Maximum tokens to generate'
              default: 1000
              minimum: 1
              maximum: 4000
            systemPrompt:
              type: string
              title: 'System Prompt'
              description: 'System prompt to set the AI behavior and context'
              default: ''
              format: multiline
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: flowdrop_ai_provider_chat_model.2
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 290
      height: 410
    selected: false
    dragging: false
  -
    id: prompt_template.3
    type: universalNode
    position:
      x: 2240
      'y': -80
    data:
      label: 'Prompt Template'
      config:
        template: |-
          Improve this article according to EU Commission content standards.

          **Original Article:**
          - Title: {{ title }}
          - Current Body:
          {% if body %}
          {{ field_body[0].value|raw }}
          {% else %}
          [No body content]
          {% endif %}
          - Current Meta Tags: {{ field_metatags }}

          **Instructions:**
          Review the article and improve it to meet all 10 EU Commission content standards. Return ONLY a JSON object with these exact fields (no markdown formatting, no code blocks, just pure JSON):

          {
            "title": "Improved title that is clear, neutral, and SEO-friendly (50-60 chars)",
            "field_body": [{"value": "<p>Complete improved body content with proper structure, sources, and plain language (full HTML)</p>", "summary": "One sentence summary", "format": "content_format"}],
            "field_metatags": [{"value": "{\"title\": \"SEO title 50-60 chars\", \"description\": \"SEO description 150-160 chars\"}"}],
            "meta_title": "SEO title 50-60 chars",
            "meta_description": "SEO description 150-160 chars",
            "explanation": "Brief summary of key improvements made"
          }

          Ensure the output is valid JSON that can be directly parsed. Use double quotes and escape inner quotes with \".
        nodeType: simple
        instanceTitle: ''
        instanceDescription: ''
      metadata:
        id: prompt_template
        name: 'Prompt Template'
        type: simple
        supportedTypes:
          - default
          - simple
        description: 'Create prompts using templates with variable substitution'
        category: prompts
        icon: 'mdi:code-block-braces'
        color: '#f59e0b'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:prompt_template'
        inputs:
          -
            id: variables
            name: Variables
            type: input
            dataType: json
            required: false
            description: 'Default variables for the template'
            defaultValue: {  }
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: prompt
            name: prompt
            type: output
            dataType: string
            required: false
            description: 'The generated prompt'
          -
            id: template
            name: template
            type: output
            dataType: string
            required: false
            description: 'The original template'
          -
            id: variables
            name: variables
            type: output
            dataType: json
            required: false
            description: 'The variables used'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          template: ''
          type: simple
        configSchema:
          type: object
          properties:
            template:
              type: string
              title: Template
              description: 'The prompt template with variables in {{variable}} format'
              default: ''
              format: template
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
              default: simple
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: prompt_template.3
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 290
      height: 106
    selected: false
    dragging: true
  -
    id: confirmation.1
    type: universalNode
    position:
      x: 4320
      'y': 60
    data:
      label: Confirmation
      config:
        message: 'Review the suggested changes below and confirm if you want to apply them to your article.'
        confirm_label: 'Apply Changes'
        cancel_label: Cancel
        branches:
          -
            name: 'True'
            value: true
          -
            name: 'False'
            value: false
        nodeType: default
      metadata:
        id: confirmation
        name: Confirmation
        type: default
        supportedTypes:
          - default
          - simple
          - gateway
        description: 'Pauses workflow for user confirmation (Yes/No)'
        category: human_in_loop
        icon: 'mdi:help-circle-outline'
        color: '#f59e0b'
        plugin_version: 1.0.0
        enabled: true
        tags:
          - human-in-loop
          - interrupt
          - confirmation
        executor_plugin: 'flowdrop_interrupt:confirmation'
        inputs:
          -
            id: message
            name: 'Confirmation Message'
            type: input
            dataType: string
            required: false
            description: 'The message to display to the user'
            defaultValue: 'Do you want to continue?'
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: confirmed
            name: confirmed
            type: output
            dataType: boolean
            required: false
            description: 'Whether the user confirmed (true) or cancelled (false)'
          -
            id: response_time
            name: response_time
            type: output
            dataType: number
            required: false
            description: 'Unix timestamp when the user responded'
          -
            id: user_id
            name: user_id
            type: output
            dataType: number
            required: false
            description: 'ID of the user who responded (null if anonymous)'
          -
            id: interrupt_id
            name: interrupt_id
            type: output
            dataType: string
            required: false
            description: 'UUID of the interrupt that was resolved'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          message: 'Do you want to continue?'
          confirm_label: 'Yes'
          cancel_label: 'No'
          branches:
            -
              name: 'True'
              value: true
            -
              name: 'False'
              value: false
          type: default
        configSchema:
          type: object
          properties:
            message:
              type: string
              title: 'Confirmation Message'
              description: 'The message to display to the user'
              default: 'Do you want to continue?'
              format: multiline
            confirm_label:
              type: string
              title: 'Confirm Button Label'
              description: 'Label for the confirmation button'
              default: 'Yes'
            cancel_label:
              type: string
              title: 'Cancel Button Label'
              description: 'Label for the cancel button'
              default: 'No'
            branches:
              type: array
              description: 'The available branches for gateway visual mode'
              readOnly: true
              default:
                -
                  name: 'True'
                  value: true
                -
                  name: 'False'
                  value: false
              items:
                type: object
                properties:
                  name:
                    type: string
                    description: 'The name of the branch'
                  value:
                    type: boolean
                    description: 'The value of the branch'
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
                - gateway
              default: default
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: confirmation.1
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 290
      height: 647
    selected: false
    dragging: false
  -
    id: json_to_data.1
    type: universalNode
    position:
      x: 4000
      'y': -460
    data:
      label: 'JSON to Data'
      config:
        instanceTitle: 'Parse AI Response'
        instanceDescription: ''
      metadata:
        id: json_to_data
        name: 'JSON to Data'
        type: default
        supportedTypes:
          - default
        description: 'Convert JSON string to structured data (array/object)'
        category: data
        icon: 'mdi:code-json'
        color: '#f97316'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:json_to_data'
        inputs:
          -
            id: json
            name: 'JSON String'
            type: input
            dataType: string
            required: false
            description: 'The JSON string to decode into structured data'
            defaultValue: ''
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: data
            name: data
            type: output
            dataType: mixed
            required: false
            description: 'The decoded structured data (array/object)'
          -
            id: success
            name: success
            type: output
            dataType: boolean
            required: false
            description: 'Whether the conversion was successful'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config: {  }
        configSchema:
          type: object
          properties:
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: json_to_data.1
      extensions:
        ui:
          hideUnconnectedHandles: true
    deletable: true
    measured:
      width: 290
      height: 292
    selected: false
    dragging: true
  -
    id: chat_output.2
    type: universalNode
    position:
      x: 3920
      'y': 540
    data:
      label: 'Chat Output'
      config:
        format: markdown
        showTimestamp: false
        nodeType: simple
        instanceTitle: 'Suggested Changes'
        instanceDescription: ''
      metadata:
        id: chat_output
        name: 'Chat Output'
        type: simple
        supportedTypes:
          - default
          - simple
          - square
        description: 'Output chat messages in various formats'
        category: processing
        icon: 'mdi:chat-alert-outline'
        color: '#14b8a6'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:chat_output'
        inputs:
          -
            id: message
            name: Message
            type: input
            dataType: string
            required: false
            description: 'Default chat message'
            defaultValue: ''
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: message
            name: message
            type: output
            dataType: string
            required: false
            description: 'The chat message content'
          -
            id: format
            name: format
            type: output
            dataType: string
            required: false
            description: 'The message format (text, markdown, html)'
          -
            id: timestamp
            name: timestamp
            type: output
            dataType: number
            required: false
            description: 'The message timestamp (if showTimestamp is enabled)'
          -
            id: metadata
            name: metadata
            type: output
            dataType: json
            required: false
            description: 'Additional metadata for message linking'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          format: markdown
          showTimestamp: false
          type: simple
        configSchema:
          type: object
          properties:
            format:
              type: string
              title: Format
              description: 'Message format (text, markdown, html)'
              default: markdown
            showTimestamp:
              type: boolean
              title: 'Show Timestamp'
              description: 'Whether to include timestamp'
              default: false
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
                - square
              default: simple
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: chat_output.2
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 290
      height: 91
    selected: false
    dragging: false
  -
    id: boolean_gateway.1
    type: universalNode
    position:
      x: 4760
      'y': 200
    data:
      label: 'Boolean Gateway'
      config:
        branches:
          -
            name: 'True'
            value: true
          -
            name: 'False'
            value: false
        instanceTitle: ''
        instanceDescription: ''
      metadata:
        id: boolean_gateway
        name: 'Boolean Gateway'
        type: gateway
        supportedTypes:
          - gateway
        description: 'Split execution paths based on conditions for workflow branching'
        category: logic
        icon: 'mdi:source-branch'
        color: '#a855f7'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:boolean_gateway'
        inputs:
          -
            id: value
            name: 'Input Value'
            type: input
            dataType: boolean
            required: false
            description: 'The value to evaluate against branch conditions'
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          branches:
            -
              name: 'True'
              value: true
            -
              name: 'False'
              value: false
        configSchema:
          type: object
          properties:
            branches:
              type: array
              description: 'The active branches'
              readOnly: true
              default:
                -
                  name: 'True'
                  value: true
                -
                  name: 'False'
                  value: false
              items:
                type: object
                properties:
                  name:
                    type: string
                    description: 'The name of the branch'
                  value:
                    type: boolean
                    description: 'The value of the branch'
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: boolean_gateway.1
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 290
      height: 330
    selected: true
    dragging: true
  -
    id: prompt_template.4
    type: universalNode
    position:
      x: 3520
      'y': 440
    data:
      label: 'Prompt Template'
      config:
        template: |-
          # {{ title }}


          ## Full content

          {{ field_body.0.value|raw }}

          ## Summary

          {{ field_body.0.summary|raw }}

          ---

          ## üîç SEO Metadata

          | **Fiel** | Value |
          | --- | --- |
          |**Meta Title:** | {{ meta_title }} |
          |**Meta Description:** | {{ meta_description }} |

          ---

          ## Explanation

          {{ explanation }}
        nodeType: simple
        instanceTitle: ''
        instanceDescription: ''
      metadata:
        id: prompt_template
        name: 'Prompt Template'
        type: simple
        supportedTypes:
          - default
          - simple
        description: 'Create prompts using templates with variable substitution'
        category: prompts
        icon: 'mdi:code-block-braces'
        color: '#f59e0b'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:prompt_template'
        inputs:
          -
            id: variables
            name: Variables
            type: input
            dataType: json
            required: false
            description: 'Default variables for the template'
            defaultValue: {  }
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: prompt
            name: prompt
            type: output
            dataType: string
            required: false
            description: 'The generated prompt'
          -
            id: template
            name: template
            type: output
            dataType: string
            required: false
            description: 'The original template'
          -
            id: variables
            name: variables
            type: output
            dataType: json
            required: false
            description: 'The variables used'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          template: ''
          type: simple
        configSchema:
          type: object
          properties:
            template:
              type: string
              title: Template
              description: 'The prompt template with variables in {{variable}} format'
              default: ''
              format: template
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
              default: simple
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: prompt_template.4
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 290
      height: 106
    selected: false
    dragging: false
  -
    id: json_to_data.2
    type: universalNode
    position:
      x: 3140
      'y': 100
    data:
      label: 'JSON to Data'
      config: {  }
      metadata:
        id: json_to_data
        name: 'JSON to Data'
        type: default
        supportedTypes:
          - default
        description: 'Convert JSON string to structured data (array/object)'
        category: data
        icon: 'mdi:code-json'
        color: '#f97316'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:json_to_data'
        inputs:
          -
            id: json
            name: 'JSON String'
            type: input
            dataType: string
            required: false
            description: 'The JSON string to decode into structured data'
            defaultValue: ''
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: data
            name: data
            type: output
            dataType: mixed
            required: false
            description: 'The decoded structured data (array/object)'
          -
            id: success
            name: success
            type: output
            dataType: boolean
            required: false
            description: 'Whether the conversion was successful'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config: {  }
        configSchema:
          type: object
          properties:
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: json_to_data.2
    deletable: true
    measured:
      width: 290
      height: 489
    selected: false
    dragging: false
  -
    id: entity_save.2
    type: universalNode
    position:
      x: 5660
      'y': -160
    data:
      label: 'Entity Save'
      config:
        entity_type: node
        bundle: article
        allowed_fields:
          - title
          - field_body
          - field_metatags
          - id
        revision_log_message: ''
        nodeType: default
      metadata:
        id: entity_save
        name: 'Entity Save'
        type: default
        supportedTypes:
          - default
          - simple
          - square
        description: 'Create or update Drupal entities'
        category: processing
        icon: 'mdi:content-save'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:entity_save'
        inputs:
          -
            id: entity_id
            name: 'Entity ID'
            type: input
            dataType: string
            required: false
            description: 'The ID of an existing entity to update (leave empty to create new)'
            defaultValue: ''
          -
            id: values
            name: 'Field Values'
            type: input
            dataType: json
            required: false
            description: 'The field values to set on the entity as key-value pairs'
            defaultValue: {  }
          -
            id: revision_log_message
            name: 'Revision Log Message'
            type: input
            dataType: string
            required: false
            description: 'Log message for the new revision (only used when new_revision is enabled)'
            defaultValue: ''
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: revision_id
            name: revision_id
            type: output
            dataType: string
            required: false
            description: 'The revision ID of the saved entity (if revisionable)'
          -
            id: entity
            name: entity
            type: output
            dataType: json
            required: false
            description: 'Full serialized entity data in the same format as Entity Trigger output'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          entity_type: node
          bundle: ''
          allowed_fields: {  }
          revision_log_message: ''
          type: default
        configSchema:
          type: object
          properties:
            entity_type:
              type: string
              title: 'Entity Type'
              description: 'The entity type to create/update (e.g., node, user, taxonomy_term)'
              default: node
            bundle:
              type: string
              title: Bundle
              description: 'The bundle/content type for the entity (required for new entities with bundles)'
              default: ''
            allowed_fields:
              type: array
              title: 'Allowed Fields'
              description: 'List of field names that are allowed to be updated. Leave empty to allow all fields.'
              default: {  }
              items:
                type: string
            revision_log_message:
              type: string
              title: 'Revision Log Message'
              description: 'Log message for the new revision (only used when new_revision is enabled)'
              default: ''
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
                - square
              default: default
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: entity_save.2
      extensions:
        ui:
          hideUnconnectedHandles: true
    deletable: true
    measured:
      width: 290
      height: 380
    selected: false
    dragging: false
  -
    id: prompt_template.5
    type: universalNode
    position:
      x: 4780
      'y': 820
    data:
      label: 'Prompt Template'
      config:
        template: 'AI Generated Content : {{ explanation }}'
        nodeType: simple
        instanceTitle: 'Revision Log message'
      metadata:
        id: prompt_template
        name: 'Prompt Template'
        type: simple
        supportedTypes:
          - default
          - simple
        description: 'Create prompts using templates with variable substitution'
        category: prompts
        icon: 'mdi:code-block-braces'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:prompt_template'
        inputs:
          -
            id: variables
            name: Variables
            type: input
            dataType: json
            required: false
            description: 'Default variables for the template'
            defaultValue: {  }
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: prompt
            name: prompt
            type: output
            dataType: string
            required: false
            description: 'The generated prompt'
          -
            id: template
            name: template
            type: output
            dataType: string
            required: false
            description: 'The original template'
          -
            id: variables
            name: variables
            type: output
            dataType: json
            required: false
            description: 'The variables used'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          template: ''
          type: simple
        configSchema:
          type: object
          properties:
            template:
              type: string
              title: Template
              description: 'The prompt template with variables in {{variable}} format'
              default: ''
              format: template
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
              default: simple
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: prompt_template.5
      extensions:
        ui:
          hideUnconnectedHandles: true
    deletable: true
    measured:
      width: 290
      height: 106
    selected: false
    dragging: false
  -
    id: data_extractor.1
    type: universalNode
    position:
      x: 460
      'y': -400
    data:
      label: 'Data Extractor'
      config:
        path: '[id]'
        default: null
        extract_all: false
      metadata:
        id: data_extractor
        name: 'Data Extractor'
        type: default
        supportedTypes:
          - default
        description: 'Extract data from JSON using JSONPath or property path notation.'
        category: data
        icon: 'mdi:database-arrow-down-outline'
        plugin_version: 2.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:data_extractor'
        inputs:
          -
            id: data
            name: 'Input Data'
            type: input
            dataType: mixed
            required: false
            description: 'Input data to extract from (array, object, or JSON string)'
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: data
            name: data
            type: output
            dataType: mixed
            required: false
            description: 'The extracted data (single value or array depending on extract_all)'
          -
            id: path
            name: path
            type: output
            dataType: string
            required: false
            description: 'The path expression that was used'
          -
            id: success
            name: success
            type: output
            dataType: boolean
            required: false
            description: 'Whether the extraction found any matches'
          -
            id: is_jsonpath
            name: is_jsonpath
            type: output
            dataType: boolean
            required: false
            description: 'Whether a JSONPath expression was used (vs property path)'
          -
            id: match_count
            name: match_count
            type: output
            dataType: number
            required: false
            description: 'Number of values matched by the path'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          path: ''
          extract_all: false
        configSchema:
          type: object
          properties:
            path:
              type: string
              title: 'Path Expression'
              description: 'JSONPath expression (starting with $) or property path. Examples: $.users[*].name, $.items[?(@.active)], user.email'
              default: ''
            default:
              type: mixed
              title: 'Default Value'
              description: "Value to return if path doesn't match anything"
              default: null
            extract_all:
              type: boolean
              title: 'Extract All Matches'
              description: 'When true, returns all matching values as an array. When false, returns only the first match.'
              default: false
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: data_extractor.1
      extensions:
        ui:
          hideUnconnectedHandles: true
    deletable: true
    measured:
      width: 290
      height: 292
    selected: false
    dragging: false
  -
    id: choice_input.1
    type: universalNode
    position:
      x: 940
      'y': 120
    data:
      label: 'Choice Input'
      config:
        message: ''
        options:
          -
            value: validate
            label: 'Run Validation'
            description: ''
          -
            value: improve
            label: 'Improve Article'
            description: ''
        multiple: false
        min_selections: 1
        nodeType: default
        instanceTitle: 'Ask User what they want to do'
        instanceDescription: 'Validate, or Improve?'
      metadata:
        id: choice_input
        name: 'Choice Input'
        type: default
        supportedTypes:
          - default
          - simple
        description: 'Pauses workflow for user to select from options'
        category: human_in_loop
        icon: 'mdi:format-list-bulleted-type'
        plugin_version: 1.0.0
        enabled: true
        tags:
          - human-in-loop
          - interrupt
          - choice
          - selection
        executor_plugin: 'flowdrop_interrupt:choice_input'
        inputs:
          -
            id: message
            name: 'Prompt Message'
            type: input
            dataType: string
            required: false
            description: 'The message to display to the user'
            defaultValue: 'Please select an option'
          -
            id: options
            name: Options
            type: input
            dataType: array
            required: false
            description: 'The options for the user to choose from'
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: selected
            name: selected
            type: output
            dataType: mixed
            required: false
            description: 'The selected value(s) - string for single, array for multiple'
          -
            id: selection_count
            name: selection_count
            type: output
            dataType: number
            required: false
            description: 'Number of options selected'
          -
            id: response_time
            name: response_time
            type: output
            dataType: number
            required: false
            description: 'Unix timestamp when the user responded'
          -
            id: user_id
            name: user_id
            type: output
            dataType: number
            required: false
            description: 'ID of the user who responded (null if anonymous)'
          -
            id: interrupt_id
            name: interrupt_id
            type: output
            dataType: string
            required: false
            description: 'UUID of the interrupt that was resolved'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          message: 'Please select an option'
          multiple: false
          min_selections: 1
          type: default
        configSchema:
          type: object
          properties:
            message:
              type: string
              title: 'Prompt Message'
              description: 'The message to display to the user'
              default: 'Please select an option'
              format: multiline
            options:
              type: array
              title: Options
              description: 'The options for the user to choose from'
              items:
                type: object
                properties:
                  value:
                    type: string
                    title: Value
                    description: 'The value returned when selected'
                  label:
                    type: string
                    title: Label
                    description: 'The display label for the option'
                  description:
                    type: string
                    title: Description
                    description: 'Optional description for the option'
                required:
                  - value
                  - label
            multiple:
              type: boolean
              title: 'Allow Multiple'
              description: 'Allow selecting multiple options'
              default: false
            min_selections:
              type: integer
              title: 'Minimum Selections'
              description: 'Minimum number of selections required'
              default: 1
              minimum: 0
            max_selections:
              type: integer
              title: 'Maximum Selections'
              description: 'Maximum number of selections allowed (leave empty for no limit)'
              minimum: 1
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
              default: default
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: choice_input.1
      extensions:
        ui:
          hideUnconnectedHandles: true
    deletable: true
    measured:
      width: 290
      height: 272
    selected: false
    dragging: false
  -
    id: prompt_template.6
    type: universalNode
    position:
      x: 500
      'y': 120
    data:
      label: 'Prompt Template'
      config:
        template: 'You have selected "{{ title }} ({{ id }})". What do you want to do?'
        nodeType: simple
      metadata:
        id: prompt_template
        name: 'Prompt Template'
        type: simple
        supportedTypes:
          - default
          - simple
        description: 'Create prompts using templates with variable substitution'
        category: prompts
        icon: 'mdi:code-block-braces'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:prompt_template'
        inputs:
          -
            id: variables
            name: Variables
            type: input
            dataType: json
            required: false
            description: 'Default variables for the template'
            defaultValue: {  }
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: prompt
            name: prompt
            type: output
            dataType: string
            required: false
            description: 'The generated prompt'
          -
            id: template
            name: template
            type: output
            dataType: string
            required: false
            description: 'The original template'
          -
            id: variables
            name: variables
            type: output
            dataType: json
            required: false
            description: 'The variables used'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          template: ''
          type: simple
        configSchema:
          type: object
          properties:
            template:
              type: string
              title: Template
              description: 'The prompt template with variables in {{variable}} format'
              default: ''
              format: template
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
              default: simple
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: prompt_template.6
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 290
      height: 106
    selected: false
    dragging: false
  -
    id: switch_gateway.1
    type: universalNode
    position:
      x: 1360
      'y': 220
    data:
      label: 'Switch Gateway'
      config:
        default_branch: default
        branches:
          -
            name: Default
            value: default
          -
            name: improve
            value: improve
          -
            name: validate
            value: validate
      metadata:
        id: switch_gateway
        name: 'Switch Gateway'
        type: gateway
        supportedTypes:
          - gateway
        description: 'A selection control flow mechanism that changes execution control based on the value of an expression.'
        category: logic
        icon: 'mdi:source-fork'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:switch_gateway'
        inputs:
          -
            id: expression
            name: Expression
            type: input
            dataType: string
            required: false
            description: 'The value to be evaluated'
            defaultValue: ''
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          default_branch: default
          branches:
            -
              name: Default
              value: default
        configSchema:
          type: object
          properties:
            default_branch:
              type: string
              title: 'Default Branch'
              description: 'The value of the default branch'
              default: default
            branches:
              type: array
              items:
                type: object
                properties:
                  name:
                    type: string
                    description: 'The name of the branch'
                  value:
                    type: string
                    description: 'The value of the branch'
              default:
                -
                  name: Default
                  value: default
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: switch_gateway.1
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 290
      height: 389
    selected: false
    dragging: false
  -
    id: flowdrop_ai_provider_chat_model.3
    type: universalNode
    position:
      x: 2480
      'y': 640
    data:
      label: 'Chat Model (Drupal AI)'
      config:
        model: mistral-large-latest
        temperature: 0.7
        maxTokens: 1000
        systemPrompt: |
          TASK:
          You are an expert content validator specializing in European Commission content standards. Analyze the provided article to meet all 10 EU Commission content standards.

          Display your analysis in a tabular format for the critical requirements noted below.

          CRITICAL FIELD REQUIREMENTS:
          - title: Clear, neutral, SEO-friendly title (50-60 characters)
          - field_body: ARRAY with one object containing:
            * value: Full HTML content with proper structure, sources, citations
            * summary: One sentence summary
          - field_metatags: REQUIRED array for Drupal (with nested JSON string)
          - field_metatags[0].value: JSON string with title and description (use \" for inner quotes)
          - meta_title: REQUIRED string (same as field_metatags title), 50-60 characters, SEO-focused
          - meta_description: REQUIRED string (same as field_metatags description), 150-160 characters with keywords
          - Note: meta_title and meta_description are duplicates for easy preview display
          - Use double quotes, escape inner quotes with \"
          - Compact format (no line breaks in JSON)

          CONTENT IMPROVEMENTS SUGGESTIONS TO MAKE:
          1. Add proper citations and sources (official EU sources)
          2. Simplify language and remove jargon
          3. Remove promotional or biased language
          4. Add proper source attributions
          5. Verify legal/policy consistency with EU treaties
          6. Improve structure and coherence
          7. Add context and completeness
          8. Use inclusive, gender-neutral language
          9. Add practical value and next steps for readers
          10. Optimize for SEO

          EXAMPLE OUTPUT:
          | Category | Status | Explanation | Suggestion |
          | --- | --- | --- | --- |
          |title | ‚ùå| Title too long| Commission adopts a first-ever EU Visa Strategy |
          |field_body | ‚úÖ | Good | |
          |meta_title|‚ùå| Missing |Commission adopts a first-ever EU Visa Strategy |
      metadata:
        id: flowdrop_ai_provider_chat_model
        name: 'Chat Model (Drupal AI)'
        type: default
        supportedTypes:
          - default
        description: 'AI chat model for conversation and text generation'
        category: ai
        icon: 'mdi:robot'
        plugin_version: 1.0.0
        enabled: true
        tags:
          - model
          - ai
        executor_plugin: 'flowdrop_ai_provider:chat_model'
        inputs:
          -
            id: message
            name: Message
            type: input
            dataType: string
            required: false
            description: 'Message to send to AI model'
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: response
            name: response
            type: output
            dataType: string
            required: false
            description: 'The AI model response'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          model: mistral-large-latest
          temperature: 0.7
          maxTokens: 1000
          systemPrompt: ''
        configSchema:
          type: object
          properties:
            model:
              type: string
              title: Model
              description: 'AI model to use for chat'
              default: mistral-large-latest
              enum:
                - chat
                - claude-4-5-sonnet
                - claude-4-5-opus
                - gpt-4.1
                - mistral-small-latest
                - mistral-medium-latest
                - mistral-large-latest
              options:
                -
                  value: chat
                  label: 'chat (amazeeio)'
                -
                  value: claude-4-5-sonnet
                  label: 'claude-4-5-sonnet (amazeeio)'
                -
                  value: claude-4-5-opus
                  label: 'claude-4-5-opus (amazeeio)'
                -
                  value: gpt-4.1
                  label: 'gpt-4.1 (amazeeio)'
                -
                  value: mistral-small-latest
                  label: 'mistral-small-latest (amazeeio)'
                -
                  value: mistral-medium-latest
                  label: 'mistral-medium-latest (amazeeio)'
                -
                  value: mistral-large-latest
                  label: 'mistral-large-latest (amazeeio)'
            temperature:
              type: number
              title: Temperature
              description: 'Model temperature (0.0 to 2.0)'
              default: 0.7
              minimum: 0
              maximum: 2
              step: '0.01'
              format: range
            maxTokens:
              type: integer
              title: 'Max Tokens'
              description: 'Maximum tokens to generate'
              default: 1000
              minimum: 1
              maximum: 4000
            systemPrompt:
              type: string
              title: 'System Prompt'
              description: 'System prompt to set the AI behavior and context'
              default: ''
              format: multiline
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: flowdrop_ai_provider_chat_model.3
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 290
      height: 410
    selected: false
  -
    id: chat_output.3
    type: universalNode
    position:
      x: 2980
      'y': 820
    data:
      label: 'Chat Output'
      config:
        format: text
        showTimestamp: false
        nodeType: simple
      metadata:
        id: chat_output
        name: 'Chat Output'
        type: simple
        supportedTypes:
          - default
          - simple
          - square
        description: 'Output chat messages in various formats'
        category: processing
        icon: 'mdi:chat-alert-outline'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:chat_output'
        inputs:
          -
            id: message
            name: Message
            type: input
            dataType: string
            required: false
            description: 'Default chat message'
            defaultValue: ''
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: message
            name: message
            type: output
            dataType: string
            required: false
            description: 'The chat message content'
          -
            id: format
            name: format
            type: output
            dataType: string
            required: false
            description: 'The message format (text, markdown, html)'
          -
            id: timestamp
            name: timestamp
            type: output
            dataType: number
            required: false
            description: 'The message timestamp (if showTimestamp is enabled)'
          -
            id: metadata
            name: metadata
            type: output
            dataType: json
            required: false
            description: 'Additional metadata for message linking'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          format: text
          showTimestamp: false
          type: simple
        configSchema:
          type: object
          properties:
            format:
              type: string
              title: Format
              description: 'Message format (text, markdown, html)'
              default: text
            showTimestamp:
              type: boolean
              title: 'Show Timestamp'
              description: 'Whether to include timestamp'
              default: false
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
                - square
              default: simple
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: chat_output.3
    deletable: true
    measured:
      width: 290
      height: 91
    selected: false
    dragging: false
  -
    id: data_to_json.1
    type: universalNode
    position:
      x: 1980
      'y': 580
    data:
      label: 'Data to JSON'
      config:
        instanceTitle: 'Original Article'
      metadata:
        id: data_to_json
        name: 'Data to JSON'
        type: default
        supportedTypes:
          - default
        description: 'Convert structured data (array/object) to JSON string'
        category: data
        icon: 'mdi:code-json'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:data_to_json'
        inputs:
          -
            id: data
            name: Data
            type: input
            dataType: mixed
            required: false
            description: 'The data to convert to JSON'
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: json
            name: json
            type: output
            dataType: string
            required: false
            description: 'The JSON string representation'
          -
            id: success
            name: success
            type: output
            dataType: boolean
            required: false
            description: 'Whether the conversion was successful'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config: {  }
        configSchema:
          type: object
          properties:
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: data_to_json.1
      extensions:
        ui:
          hideUnconnectedHandles: false
    deletable: true
    measured:
      width: 290
      height: 489
    selected: false
    dragging: true
  -
    id: chat_output.4
    type: universalNode
    position:
      x: 1860
      'y': 60
    data:
      label: 'Chat Output'
      config:
        format: text
        showTimestamp: false
        nodeType: simple
      metadata:
        id: chat_output
        name: 'Chat Output'
        type: simple
        supportedTypes:
          - default
          - simple
          - square
        description: 'Output chat messages in various formats'
        category: processing
        icon: 'mdi:chat-alert-outline'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:chat_output'
        inputs:
          -
            id: message
            name: Message
            type: input
            dataType: string
            required: false
            description: 'Default chat message'
            defaultValue: ''
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: message
            name: message
            type: output
            dataType: string
            required: false
            description: 'The chat message content'
          -
            id: format
            name: format
            type: output
            dataType: string
            required: false
            description: 'The message format (text, markdown, html)'
          -
            id: timestamp
            name: timestamp
            type: output
            dataType: number
            required: false
            description: 'The message timestamp (if showTimestamp is enabled)'
          -
            id: metadata
            name: metadata
            type: output
            dataType: json
            required: false
            description: 'Additional metadata for message linking'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          format: text
          showTimestamp: false
          type: simple
        configSchema:
          type: object
          properties:
            format:
              type: string
              title: Format
              description: 'Message format (text, markdown, html)'
              default: text
            showTimestamp:
              type: boolean
              title: 'Show Timestamp'
              description: 'Whether to include timestamp'
              default: false
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
                - square
              default: simple
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: chat_output.4
    deletable: true
    measured:
      width: 290
      height: 91
    selected: false
    dragging: false
  -
    id: prompt_template.7
    type: universalNode
    position:
      x: 1360
      'y': 0
    data:
      label: 'Prompt Template'
      config:
        template: |-
          # NOTICE

          Automatic Tagging assistance has been disabled temporarily because of adverse performance.

          > This is just an example message.
        nodeType: simple
      metadata:
        id: prompt_template
        name: 'Prompt Template'
        type: simple
        supportedTypes:
          - default
          - simple
        description: 'Create prompts using templates with variable substitution'
        category: prompts
        icon: 'mdi:code-block-braces'
        plugin_version: 1.0.0
        enabled: true
        tags: {  }
        executor_plugin: 'flowdrop_node_processor:prompt_template'
        inputs:
          -
            id: variables
            name: Variables
            type: input
            dataType: json
            required: false
            description: 'Default variables for the template'
            defaultValue: {  }
          -
            id: trigger
            name: Trigger
            type: input
            dataType: trigger
            required: false
            description: ''
        outputs:
          -
            id: prompt
            name: prompt
            type: output
            dataType: string
            required: false
            description: 'The generated prompt'
          -
            id: template
            name: template
            type: output
            dataType: string
            required: false
            description: 'The original template'
          -
            id: variables
            name: variables
            type: output
            dataType: json
            required: false
            description: 'The variables used'
          -
            id: trigger
            name: Trigger
            type: output
            dataType: trigger
            required: false
            description: 'Emitted when this node completes execution'
        config:
          template: ''
          type: simple
        configSchema:
          type: object
          properties:
            template:
              type: string
              title: Template
              description: 'The prompt template with variables in {{variable}} format'
              default: ''
              format: template
            nodeType:
              type: string
              title: 'Visual Type'
              description: 'Select the visual appearance for this node instance.'
              enum:
                - default
                - simple
              default: simple
            instanceTitle:
              type: string
              title: Title
              description: 'Override the default node title for this instance.'
              x-display-order: -2
            instanceDescription:
              type: string
              title: Description
              description: 'Override the default description for this instance.'
              format: multiline
              x-display-order: -1
          required: {  }
      nodeId: prompt_template.7
      extensions:
        ui:
          hideUnconnectedHandles: true
    deletable: true
    measured:
      width: 290
      height: 106
    selected: false
    dragging: false
edges:
  -
    id: xy-edge__prompt_template.3prompt_template.3-output-prompt-flowdrop_ai_provider_chat_model.2flowdrop_ai_provider_chat_model.2-input-message
    source: prompt_template.3
    target: flowdrop_ai_provider_chat_model.2
    data:
      targetNodeType: universalNode
      targetCategory: ai
      metadata:
        edgeType: data
        sourcePortDataType: string
    sourceHandle: prompt_template.3-output-prompt
    targetHandle: flowdrop_ai_provider_chat_model.2-input-message
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__echack_flowdrop_node_session_content_context.1echack_flowdrop_node_session_content_context.1-output-entity-prompt_template.3prompt_template.3-input-variables
    source: echack_flowdrop_node_session_content_context.1
    target: prompt_template.3
    data:
      targetNodeType: universalNode
      targetCategory: prompts
      metadata:
        edgeType: data
        sourcePortDataType: json
    sourceHandle: echack_flowdrop_node_session_content_context.1-output-entity
    targetHandle: prompt_template.3-input-variables
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__chat_output.2chat_output.2-output-trigger-confirmation.1confirmation.1-input-trigger
    source: chat_output.2
    target: confirmation.1
    data:
      targetNodeType: universalNode
      targetCategory: human_in_loop
      metadata:
        edgeType: trigger
        sourcePortDataType: trigger
    sourceHandle: chat_output.2-output-trigger
    targetHandle: confirmation.1-input-trigger
    style: 'stroke: var(--fd-edge-trigger); stroke-width: var(--fd-edge-trigger-width);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#18181c'
    class: flowdrop--edge--trigger
    selected: false
  -
    id: xy-edge__confirmation.1confirmation.1-output-confirmed-boolean_gateway.1boolean_gateway.1-input-value
    source: confirmation.1
    target: boolean_gateway.1
    data:
      targetNodeType: universalNode
      targetCategory: logic
      metadata:
        edgeType: data
        sourcePortDataType: boolean
    sourceHandle: confirmation.1-output-confirmed
    targetHandle: boolean_gateway.1-input-value
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__flowdrop_ai_provider_chat_model.2flowdrop_ai_provider_chat_model.2-output-response-json_to_data.1json_to_data.1-input-json
    source: flowdrop_ai_provider_chat_model.2
    target: json_to_data.1
    data:
      targetNodeType: universalNode
      targetCategory: data
      metadata:
        edgeType: data
        sourcePortDataType: string
    sourceHandle: flowdrop_ai_provider_chat_model.2-output-response
    targetHandle: json_to_data.1-input-json
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__flowdrop_ai_provider_chat_model.2flowdrop_ai_provider_chat_model.2-output-response-json_to_data.2json_to_data.2-input-json
    source: flowdrop_ai_provider_chat_model.2
    target: json_to_data.2
    data:
      targetNodeType: universalNode
      targetCategory: data
      metadata:
        edgeType: data
        sourcePortDataType: string
    sourceHandle: flowdrop_ai_provider_chat_model.2-output-response
    targetHandle: json_to_data.2-input-json
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__json_to_data.2json_to_data.2-output-data-prompt_template.4prompt_template.4-input-variables
    source: json_to_data.2
    target: prompt_template.4
    data:
      targetNodeType: universalNode
      targetCategory: prompts
      metadata:
        edgeType: data
        sourcePortDataType: mixed
    sourceHandle: json_to_data.2-output-data
    targetHandle: prompt_template.4-input-variables
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__prompt_template.4prompt_template.4-output-prompt-chat_output.2chat_output.2-input-message
    source: prompt_template.4
    target: chat_output.2
    data:
      targetNodeType: universalNode
      targetCategory: processing
      metadata:
        edgeType: data
        sourcePortDataType: string
    sourceHandle: prompt_template.4-output-prompt
    targetHandle: chat_output.2-input-message
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__json_to_data.1json_to_data.1-output-data-entity_save.2entity_save.2-input-values
    source: json_to_data.1
    target: entity_save.2
    data:
      targetNodeType: universalNode
      targetCategory: processing
      metadata:
        edgeType: data
        sourcePortDataType: mixed
    sourceHandle: json_to_data.1-output-data
    targetHandle: entity_save.2-input-values
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__prompt_template.5prompt_template.5-output-prompt-entity_save.2entity_save.2-input-revision_log_message
    source: prompt_template.5
    target: entity_save.2
    data:
      targetNodeType: universalNode
      targetCategory: processing
      metadata:
        edgeType: data
        sourcePortDataType: string
    sourceHandle: prompt_template.5-output-prompt
    targetHandle: entity_save.2-input-revision_log_message
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__json_to_data.2json_to_data.2-output-data-prompt_template.5prompt_template.5-input-variables
    source: json_to_data.2
    target: prompt_template.5
    data:
      targetNodeType: universalNode
      targetCategory: prompts
      metadata:
        edgeType: data
        sourcePortDataType: mixed
    sourceHandle: json_to_data.2-output-data
    targetHandle: prompt_template.5-input-variables
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__boolean_gateway.1boolean_gateway.1-output-True-entity_save.2entity_save.2-input-trigger
    source: boolean_gateway.1
    target: entity_save.2
    data:
      targetNodeType: universalNode
      targetCategory: processing
      metadata:
        edgeType: trigger
        sourcePortDataType: trigger
    sourceHandle: boolean_gateway.1-output-True
    targetHandle: entity_save.2-input-trigger
    style: 'stroke: var(--fd-edge-trigger); stroke-width: var(--fd-edge-trigger-width);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#18181c'
    class: flowdrop--edge--trigger
    selected: false
  -
    id: xy-edge__echack_flowdrop_node_session_content_context.1echack_flowdrop_node_session_content_context.1-output-entity-data_extractor.1data_extractor.1-input-data
    source: echack_flowdrop_node_session_content_context.1
    target: data_extractor.1
    data:
      targetNodeType: universalNode
      targetCategory: data
      metadata:
        edgeType: data
        sourcePortDataType: json
    sourceHandle: echack_flowdrop_node_session_content_context.1-output-entity
    targetHandle: data_extractor.1-input-data
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__data_extractor.1data_extractor.1-output-data-entity_save.2entity_save.2-input-entity_id
    source: data_extractor.1
    target: entity_save.2
    data:
      targetNodeType: universalNode
      targetCategory: processing
      metadata:
        edgeType: data
        sourcePortDataType: mixed
    sourceHandle: data_extractor.1-output-data
    targetHandle: entity_save.2-input-entity_id
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__echack_flowdrop_node_session_content_context.1echack_flowdrop_node_session_content_context.1-output-entity-prompt_template.6prompt_template.6-input-variables
    source: echack_flowdrop_node_session_content_context.1
    target: prompt_template.6
    data:
      targetNodeType: universalNode
      targetCategory: prompts
      metadata:
        edgeType: data
        sourcePortDataType: json
    sourceHandle: echack_flowdrop_node_session_content_context.1-output-entity
    targetHandle: prompt_template.6-input-variables
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__prompt_template.6prompt_template.6-output-prompt-choice_input.1choice_input.1-input-message
    source: prompt_template.6
    target: choice_input.1
    data:
      targetNodeType: universalNode
      targetCategory: human_in_loop
      metadata:
        edgeType: data
        sourcePortDataType: string
    sourceHandle: prompt_template.6-output-prompt
    targetHandle: choice_input.1-input-message
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__choice_input.1choice_input.1-output-selected-switch_gateway.1switch_gateway.1-input-expression
    source: choice_input.1
    target: switch_gateway.1
    data:
      targetNodeType: universalNode
      targetCategory: logic
      metadata:
        edgeType: data
        sourcePortDataType: mixed
    sourceHandle: choice_input.1-output-selected
    targetHandle: switch_gateway.1-input-expression
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__flowdrop_ai_provider_chat_model.3flowdrop_ai_provider_chat_model.3-output-response-chat_output.3chat_output.3-input-message
    source: flowdrop_ai_provider_chat_model.3
    target: chat_output.3
    data:
      targetNodeType: universalNode
      targetCategory: processing
      metadata:
        edgeType: data
        sourcePortDataType: string
    sourceHandle: flowdrop_ai_provider_chat_model.3-output-response
    targetHandle: chat_output.3-input-message
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__echack_flowdrop_node_session_content_context.1echack_flowdrop_node_session_content_context.1-output-entity-data_to_json.1data_to_json.1-input-data
    source: echack_flowdrop_node_session_content_context.1
    target: data_to_json.1
    data:
      targetNodeType: universalNode
      targetCategory: data
      metadata:
        edgeType: data
        sourcePortDataType: json
    sourceHandle: echack_flowdrop_node_session_content_context.1-output-entity
    targetHandle: data_to_json.1-input-data
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__data_to_json.1data_to_json.1-output-json-flowdrop_ai_provider_chat_model.3flowdrop_ai_provider_chat_model.3-input-message
    source: data_to_json.1
    target: flowdrop_ai_provider_chat_model.3
    data:
      targetNodeType: universalNode
      targetCategory: ai
      metadata:
        edgeType: data
        sourcePortDataType: string
    sourceHandle: data_to_json.1-output-json
    targetHandle: flowdrop_ai_provider_chat_model.3-input-message
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__switch_gateway.1switch_gateway.1-output-validate-flowdrop_ai_provider_chat_model.3flowdrop_ai_provider_chat_model.3-input-trigger
    source: switch_gateway.1
    target: flowdrop_ai_provider_chat_model.3
    data:
      targetNodeType: universalNode
      targetCategory: ai
      metadata:
        edgeType: trigger
        sourcePortDataType: trigger
    sourceHandle: switch_gateway.1-output-validate
    targetHandle: flowdrop_ai_provider_chat_model.3-input-trigger
    style: 'stroke: var(--fd-edge-trigger); stroke-width: var(--fd-edge-trigger-width);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#18181c'
    class: flowdrop--edge--trigger
    selected: false
  -
    id: xy-edge__switch_gateway.1switch_gateway.1-output-improve-chat_output.4chat_output.4-input-trigger
    source: switch_gateway.1
    target: chat_output.4
    data:
      targetNodeType: universalNode
      targetCategory: processing
      metadata:
        edgeType: trigger
        sourcePortDataType: trigger
    sourceHandle: switch_gateway.1-output-improve
    targetHandle: chat_output.4-input-trigger
    style: 'stroke: var(--fd-edge-trigger); stroke-width: var(--fd-edge-trigger-width);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#18181c'
    class: flowdrop--edge--trigger
    selected: false
  -
    id: xy-edge__prompt_template.7prompt_template.7-output-prompt-chat_output.4chat_output.4-input-message
    source: prompt_template.7
    target: chat_output.4
    data:
      targetNodeType: universalNode
      targetCategory: processing
      metadata:
        edgeType: data
        sourcePortDataType: string
    sourceHandle: prompt_template.7-output-prompt
    targetHandle: chat_output.4-input-message
    style: 'stroke: var(--fd-edge-data);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#a3a3ad'
    class: flowdrop--edge--data
    selected: false
  -
    id: xy-edge__chat_output.4chat_output.4-output-trigger-prompt_template.3prompt_template.3-input-trigger
    source: chat_output.4
    target: prompt_template.3
    data:
      targetNodeType: universalNode
      targetCategory: prompts
      metadata:
        edgeType: trigger
        sourcePortDataType: trigger
    sourceHandle: chat_output.4-output-trigger
    targetHandle: prompt_template.3-input-trigger
    style: 'stroke: var(--fd-edge-trigger); stroke-width: var(--fd-edge-trigger-width);'
    markerEnd:
      type: arrowclosed
      width: 16
      height: 16
      color: '#18181c'
    class: flowdrop--edge--trigger
    selected: false
metadata:
  version: 1.0.0
  createdAt: '2026-01-28T09:01:32.652Z'
  updatedAt: '2026-02-12T13:41:47.085Z'
created: 1769600262
changed: 1770903707
uid: 0
